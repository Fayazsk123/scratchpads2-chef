# Generated by Chef for <%= node["fqdn"] %>
# Local modifications will be overwritten.

# Pass the Daemon options
DAEMON_OPTS="-a sp-control-1.nhm.ac.uk:80 \
              -f <%= node['varnish']['dir'] %>/<%= node['varnish']['vcl_conf'] %> \
              -T <%= node['varnish']['listen_address'] %>:<%= node['varnish']['admin_listen_port'] %> \
              -u <%= node['varnish']['user'] %> -g <%= node['varnish']['group'] %> \
              -t <%= node['varnish']['ttl'] %> \
              -n <%= node['varnish']['instance'] %> \
              -s file,<%= node['varnish']['storage_file'] %>,20G \
                  -p thread_pools=<%= node['varnish']['parameters']['thread_pools'] %> \
                  -p thread_pool_min=<%= node['varnish']['parameters']['thread_pool_min'] %> \
                  -p thread_pool_max=<%= node['varnish']['parameters']['thread_pool_max'] %> \
                  -p thread_pool_timeout=<%= node['varnish']['parameters']['thread_pool_timeout'] %> \
              -S <%= node['varnish']['secret_file'] %>"
