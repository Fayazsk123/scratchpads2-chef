vcl 4.0;

import std;

backend default {
  .host = "127.0.0.1";
  .port = "80";
}

sub vcl_recv {
  return (synth(503, "Maintenance"));
}

sub vcl_synth {
  set resp.status = 503;
  set resp.http.Content-Type = "text/html; charset=utf-8";
  synthetic(std.fileread("/etc/varnish/maintenance.html"));
  return (deliver);
}