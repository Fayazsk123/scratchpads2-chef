{
  "name": "app",
  "description": "Application server role.",
  "default_attributes": {
    "chef_client": {
      "init_style": "systemd"
    },
    "gkrellmd": {
      "allowed_hosts": [
        "157.140.126.246",
        "monkey.nhm.ac.uk"
      ]
    },
    "percona": {
      "use_percona_repos": false,
      "apt_keyserver": "keyserver.ubuntu.com",
      "server": {
        "bind_address": ""
      }
    },
    "php": {
      "conf_dir": "/etc/php5/apache2",
      "directives": {
        "memory_limit": "512M",
        "session.save_path": "/var/www/php-sessions"
      },
      "ext_conf_dir": "/etc/php5/mods-available",
      "packages": [
        "php5",
        "php5-apcu",
        "php5-cli",
        "php5-curl",
        "php5-gd",
        "php5-gmp",
        "php5-intl",
        "php5-mcrypt",
        "php5-mysql",
        "php5-memcache",
        "php5-pecl-http",
        "php5-propro",
        "php5-raphf",
        "php-console-table"
      ]
    }
  },
  "override_attributes": {
    "apache": {
      "listen_addresses": [
        "0.0.0.0"
      ],
      "mpm": "prefork"
    },
    "percona": {
      "encrypted_data_bag_secret_file": "/vagrant/.chef/encrypted_data_bag_secret"
    },
    "postfix": {
      "relayhost_role": "control"
    }
  },
  "run_list": [
    "recipe[imagemagick]",
    "recipe[scratchpads]",
    "recipe[scratchpads::percona]",
    "recipe[scratchpads::webserver]",
    "recipe[scratchpads::aegir]",
    "recipe[scratchpads::nfs]",
    "recipe[scratchpads::postfix]"
  ]
}